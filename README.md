<h1 align="center">BEAT☆MUSIC☆SEQUENCE</h1>

<p align="center">(a.k.a. BE☆MU☆SE)</p>

<h3 align="center"><em>web-based music game of the future</em></h3>

<p align="center">
  <a href="https://waffle.io/bemusic/bemuse"><img src="http://img.shields.io/badge/wow%20much-waffle-green.svg?style=flat" alt="Waffles"></a>
  <a href="https://travis-ci.org/bemusic/bemuse"><img src="https://img.shields.io/travis/bemusic/bemuse.svg?style=flat" alt="Travis CI"></a>
  <a href="https://codeclimate.com/github/bemusic/bemuse"><img src="https://img.shields.io/codeclimate/github/bemusic/bemuse.svg?style=flat" alt="Code Climate"></a>
  <a href="https://codeclimate.com/github/bemusic/bemuse"><img src="https://img.shields.io/codeclimate/coverage/github/bemusic/bemuse.svg?style=flat" alt="Code Climate (Coverage)"></a>
  <a href="http://bemusic.viewdocs.io/bemuse"><img src="https://img.shields.io/badge/view-docs-brightgreen.svg?style=flat" alt="View Docs"></a>
  <a href="https://gitter.im/bemusic/bemuse"><img src="https://img.shields.io/badge/gitter-join%20chat-green.svg?style=flat" alt="Gitter"></a>
  <br>
  <a href="https://david-dm.org/bemusic/bemuse" title="Dependency status"><img src="https://david-dm.org/bemusic/bemuse.svg" alt="david-dm Dependency Status"></a>
  <a href="https://david-dm.org/bemusic/bemuse#info=devDependencies" title="devDependency status"><img src="https://david-dm.org/bemusic/bemuse/dev-status.svg" alt="david-dm Development Depedency Status"></a>
</p>

---

__This project uses [README-Driven Development][RDD]__, and we are in the planning stage. Therefore, what you read below, as of the time of writing, doesn't exist yet. Also check out the [__Project Plan__][Plan]. The actual development starts in 2015. This file will also evolve over time as development progresses.

Should you have any question about the project plan, now is a good time to raise an issue.

[RDD]: http://tom.preston-werner.com/2010/08/23/readme-driven-development.html
[Plan]: https://workflowy.com/s/ZM4dIDZWRR

---

Free and open-source web-based BMS simulator, built with the future's web technology.
Play on your computer or on your iPad.

## Features

* Online play
  * comes with some [default selection of songs](https://github.com/bemusic/music).
  * people can host song collections on their own servers too.
* Offline play
  * downloaded simfiles can be played later offline.
  * can also play simfiles on your computer.
* BMS simfile support:
  * 7-keys + Scratch
  * 7-keys
  * 14-keys
  * However, they must be converted into ".bemuse" files first.
* Game modes:
  * Single player mode
  * Two player mode — two players play on the same machine.
* Online start time synchronization — play together with friends.
* Fully supports keysounds.
* Supports `#LNTYPE 1` and `#LNOBJ`.
* Play on PC (using keyboard or gamepad) or on iPad.


## Development


### Project Structure

To make the game load as fast as possible, the app is split into multiple parts:

- __boot__: A special module to display loading bar and loads the application.
  Dependencies should be minimized.
  Code will be inlined into index.html.
- __app__: The game itself.
- __test__: The test code.

### Directory Structure

- __bin__: Miscellaneous shell scripts.
- __config__: Contains application configuration.
- __public__: Contains default HTML and CSS assets.
- __src__: Contains the application source code.
- __tasks__: Contains Gulp tasks.
  - __support__: Contains support code for Gulp tasks.
- __web_modules__: Contains modules that is not convenient to include through npm, such as Jasmine.

These directories are generated by the build tool and is not in repository:

- __coverage__: Contains code coverage data and report.
- __dist__: Contains built code that will be uploaded.


### Prerequisites

- Node.js
- Git
- Text Editor with `.editorconfig` Support


### Setup

1. Clone the Git repository.
2. Run `npm install` to install dependencies.
3. Run `bin/setup` to setup pre-commit hooks and other setup stuff.


### Development Server

```bash
npm start
```

- To run the application, go to `http://localhost:8080/`.
- To run unit tests, go to `http://localhost:8080/webpack-dev-server/?mode=test`.


### Development Server with Code Coverage

```bash
COV=true npm start
```

This runs the server in coverage mode.
Running the unit tests makes the server write a coverage report to `coverage`
directory. 

You can view the coverage report at `http://localhost:8080/coverage/`.



### Building

```bash
npm run build
```



### Running Tests

```bash
npm test
```



### Bemuse File

BMS files need to be converted into `.bemuse` file format before playing on BE☆MU☆SE.
It is a simple file format to hold BMS files and keysound files together.
A custom format is created to be easily consumed by web applications, both on desktop and mobile devices. Major differences include:

- Use MP3 files for samples
- Use WebM files for movie
- Use PNG files for BGA

BMS package can be converted into `.bemuse` file using [__bemusepack__][bemusepack] tool.

[bemusepack]: https://github.com/bemusic/pack



## License

[AGPLv3](LICENSE), for now.
After the project matures, it may be released into a more permissive license.
