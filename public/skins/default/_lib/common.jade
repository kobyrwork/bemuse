
mixin media(type, width, height)
  if media == type
    skin(width=width height=height)
      block

mixin longnote(x, cur, add, visible)
  // body
  sprite(image='Note/DX.png'
          frame=(cur.width + 'x64+' + cur.x + '+' + (22 + add))
          x=(x)
          y=('(y*'+area_height+')+4-12')
          width=(cur.width)
          height=('height*'+area_height)
          visible=visible)
  // tail
  sprite(image='Note/DX.png'
          frame=(cur.width + 'x8+' + cur.x + '+' + (104 + add))
          x=(x)
          y='((y+height)*'+area_height+')+4-12'
          visible=visible)
  // head
  sprite(image='Note/DX.png'
          frame=(cur.width + 'x8+' + cur.x + '+' + (12 + add))
          x=(x)
          y='(y*'+area_height+')-12'
          visible=visible)

mixin notes(columns)
  - var x = 0
  each column in columns
    - var cur = styles[column.style]
    - var ch  = column.channel
    object(key='p1_note_' + ch)
      sprite(image='Note/DX.png' frame=(cur.width + 'x12+' + cur.x + '+0')
              x=(x) y='(y*'+area_height+')-12')
    object(key='p1_longnote_' + ch)
      +longnote(x, cur, 0, '!active && !missed')
      +longnote(x, cur, 100, '!!active && !missed')
      +longnote(x, cur, 200, '!!missed')
    - x = x + cur.width + 1

